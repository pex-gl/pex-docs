
  <html>
  <head>
  <link rel="stylesheet" href="../../assets/github-markdown.css">
  <link rel="stylesheet" href="../../assets/github.css">
  <style>
    .markdown-body {
      box-sizing: border-box;
      min-width: 200px;
      max-width: 980px;
      padding: 45px;
    }

    @media (max-width: 767px) {
      .markdown-body {
        padding: 15px;
      }
    }

  </style>
  </head>
  <body class="markdown-body">
  <h1><a name="glslify-promise"></a>glslify-promise</h1>
<p><a href="http://github.com/badges/stability-badges"><img src="http://badges.github.io/stability-badges/dist/experimental.svg" alt="experimental" /></a></p>
<p>A Promise wrapper for glslify, providing a consistent interface between both <a href="http://nodejs.org/">Node.js</a> and
<a href="http://browserify.org/">browserify</a>.</p>
<p>Intended for use with <a href="http://github.com/vorg/pex">Pex</a>.</p>
<h2><a name="usage"></a>Usage</h2>
<p><a href="https://nodei.co/npm/glslify-promise/"><img src="https://nodei.co/npm/glslify-promise.png" alt="NPM" /></a></p>
<h3><a name="-promise---glslify-file---options---"></a><code>promise = glslify(file, [options])</code></h3>
<p>Where <code>file</code> and <code>options</code> accept the same arguments as
the <a href="http://github.com/stackgl/glslify">glslify</a> package.</p>
<p>For example, the following should work out of the box with Node:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> glslify = <span class="hljs-built_in">require</span>(<span class="hljs-string">'glslify-promise'</span>)
<span class="hljs-keyword">var</span> promise = glslify(__dirname + <span class="hljs-string">'/shader.glsl'</span>)

promise.then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">source</span>) </span>{
  <span class="hljs-built_in">console</span>.log(source) <span class="hljs-comment">// your glslified GLSL source!</span>
})
</code></pre>
<p>By adding <code>glslify-promise/transform</code> to your <code>package.json</code>
file, you should be able to do the same in browserify too:</p>
<pre><code class="lang-json">{
  &quot;<span class="hljs-attribute">browserify</span>&quot;: <span class="hljs-value">{
    &quot;<span class="hljs-attribute">transform</span>&quot;: <span class="hljs-value">[
      <span class="hljs-string">&quot;glslify-pex/transform&quot;</span>
    ]
  </span>}
</span>}
</code></pre>
<p>Note that like <a href="http://github.com/stackgl/glslify">glslify</a>
and <a href="http://github.com/substack/brfs">brfs</a> file paths need
to be statically determinable, meaning that you can't use
variables in your require statements. The
following script would produce an error when running with
browserify:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> glslify  = <span class="hljs-built_in">require</span>(<span class="hljs-string">'glslify'</span>)
<span class="hljs-keyword">var</span> filename = __dirname + <span class="hljs-string">'/shader.glsl'</span>

<span class="hljs-keyword">var</span> promise = glslify(filename)
</code></pre>
<p>Whereas the following is still valid:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> glslify = <span class="hljs-built_in">require</span>(<span class="hljs-string">'glslify'</span>)
<span class="hljs-keyword">var</span> promise = glslify(__dirname + <span class="hljs-string">'/shader.glsl'</span>)
</code></pre>
<p>Also note that this package is using the native <code>Promise</code> global.
For cross-browser compatibility you'll want to include the
<a href="http://ghub.io/es6-promise">es6-promise</a> polyfill.</p>
<h2><a name="contributing"></a>Contributing</h2>
<p>See <a href="https://github.com/stackgl/contributing">stackgl/contributing</a> for details.</p>
<h2><a name="license"></a>License</h2>
<p>MIT. See <a href="http://github.com/stackgl/glslify-promise/blob/master/LICENSE.md">LICENSE.md</a> for details.</p>

  </body>
  </html>
  