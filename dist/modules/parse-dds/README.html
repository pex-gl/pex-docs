
  <html>
  <head>
  <link rel="stylesheet" href="../../assets/github-markdown.css">
  <link rel="stylesheet" href="../../assets/github.css">
  <style>
    .markdown-body {
      box-sizing: border-box;
      min-width: 200px;
      max-width: 980px;
      padding: 45px;
    }

    @media (max-width: 767px) {
      .markdown-body {
        padding: 15px;
      }
    }

  </style>
  </head>
  <body class="markdown-body">
  <h1><a name="parse-dds"></a>parse-dds</h1>
<p><a href="http://github.com/badges/stability-badges"><img src="http://badges.github.io/stability-badges/dist/unstable.svg" alt="unstable" /></a></p>
<p>Parses DDS texture headers in Node and the browser.</p>
<p>This was adapted from <a href="https://twitter.com/Tojiro">@toji</a>'s wonderful <a href="https://github.com/toji/webgl-texture-utils/blob/master/texture-util/dds.js">webgl-texture-utils</a>.</p>
<p>Currently this only supports a limited range of common DDS formats:</p>
<ul>
<li>DXT1 (RGB)</li>
<li>DXT3 (RGBA)</li>
<li>DXT5 (RGBA)</li>
<li>Cubemaps (RGBA32f) - like those from <a href="https://github.com/dariomanesku/cmft">cmft</a> and <a href="https://seblagarde.wordpress.com/2012/06/10/amd-cubemapgen-for-physically-based-rendering/">Modified AMD Cubemapgen</a></li>
</ul>
<p>See <a href="test/index.js">test/index.js</a> for an example in Node, or <a href="demo/index.js">demo/index.js</a> for a WebGL compressed texture example.</p>
<p>Pull requests welcome.</p>
<h2><a name="example"></a>Example</h2>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> parse = <span class="hljs-built_in">require</span>(<span class="hljs-string">'parse-dds'</span>)

<span class="hljs-keyword">var</span> buffer = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>(... DDS file ...)
<span class="hljs-keyword">var</span> dds = parse(buffer)

<span class="hljs-built_in">console</span>.log(dds.format)  <span class="hljs-comment">// 'dxt1'</span>
<span class="hljs-built_in">console</span>.log(dds.shape)   <span class="hljs-comment">// [ width, height ]</span>
<span class="hljs-built_in">console</span>.log(dds.images)  <span class="hljs-comment">// [ ... mipmap level data ... ]</span>

<span class="hljs-comment">// get the compressed texture data for gl.compressedTexImage2D</span>
<span class="hljs-keyword">var</span> image = dds.images[<span class="hljs-number">0</span>]
<span class="hljs-keyword">var</span> texture = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>(buffer, image.offset, image.length)
</code></pre>
<h2><a name="install"></a>Install</h2>
<pre><code class="lang-sh">npm install parse-dds --save-dev
</code></pre>
<h2><a name="usage"></a>Usage</h2>
<p><a href="https://www.npmjs.com/package/parse-dds"><img src="https://nodei.co/npm/parse-dds.png" alt="NPM" /></a></p>
<h4><a name="-dds---parse-arraybuffer--"></a><code>dds = parse(arrayBuffer)</code></h4>
<p>Parses an ArrayBuffer and returns the DDS headers for that file.</p>
<p>The returned values:</p>
<ul>
<li><code>shape</code> an array representing the <code>[ width, height ]</code> of the texture</li>
<li><code>flags</code> the DDS bit flags stored in the file</li>
<li><code>format</code> a string, either <code>'dxt1'</code>, <code>'dxt3'</code>, <code>'dxt5'</code> or <code>'rgba32f'</code></li>
<li><code>images</code> a list of information to extract sub-arrays for each mipmap level</li>
<li><code>cubemap</code> a boolean indicating whether the file contains a cubemap image</li>
</ul>
<p>Each image has the form:</p>
<pre><code class="lang-js">{
  shape: [ width, height ], <span class="hljs-comment">// size of this mipmap level</span>
  offset: x,                <span class="hljs-comment">// byte offset into the input buffer</span>
  length: len,              <span class="hljs-comment">// length of this mipmap level image data</span>
}
</code></pre>
<h2><a name="see-also"></a>See Also</h2>
<ul>
<li><a href="https://github.com/Jam3/preview-dds">preview-dds</a> for loading and previewing DDS files</li>
</ul>
<h2><a name="license"></a>License</h2>
<p>MIT, see <a href="http://github.com/Jam3/parse-dds/blob/master/LICENSE.md">LICENSE.md</a> for details.</p>

  </body>
  </html>
  